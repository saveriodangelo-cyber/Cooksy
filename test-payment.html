<!DOCTYPE html>
<html>

<head>
    <title>Cooksy - Test Pagamenti Stripe</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        body {
            font-family: Arial;
            max-width: 600px;
            margin: 50px auto;
        }

        .plan {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
        }

        button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background: #0056b3;
        }
    </style>
</head>

<body>
    <h1>üç≥ Cooksy - Sottoscrivi</h1>

    <div class="plan">
        <h2>Starter - ‚Ç¨9.99/mese</h2>
        <p>5 ricette al mese</p>
        <button onclick="checkout('price_1SuRBsRaGVULYly86I8muWw1')">Sottoscrivi Starter</button>
    </div>

    <div class="plan">
        <h2>Pro - ‚Ç¨29.99/mese</h2>
        <p>Ricette illimitate</p>
        <button onclick="checkout('price_1SuRAURaGVULYly8ybTG7cbq')">Sottoscrivi Pro</button>
    </div>

    <script>
        const stripe = Stripe('pk_live_51SuLKmRaGVULYly8V0OvqmcUdm3NvGkrRGGrG9Qz5H1iMfgsPi6VhHCsDWPFp8pHBQufM1Mkulc91XUE35cTjWWk005P9QTFDk');

        async function checkout(priceId) {
            const response = await fetch('https://cooksy-finaly.up.railway.app/api/create-checkout-session', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ price_id: priceId })
            });

            const { session_id } = await response.json();
            if (session_id) {
                stripe.redirectToCheckout({ sessionId: session_id });
            }
        }
    </script>
</body>

</html>